scheduler_tick_secs: 1
max_concurrent_tasks: 100
logging_level: "debug"
persistence_path: "./orion-data-node3"
metrics_port: 9002
metrics_enabled: true

node:
  name: "node-3"
  hostname: "localhost"
  listen_addr: "0.0.0.0:8083"  # CHANGE: 8082 â†’ 8083 (avoid conflict!)
  capabilities:
    cpu_cores: 2
    memory_mb: 4096
    storage_mb: 51200
    max_concurrent_tasks: 30
    supported_task_types:
      - default
      - cpu-intensive
      - low-latency
      - general

# MUST BE cluster_config: (not cluster:)
cluster_config:
  enabled: true
  cluster_name: "orion-cluster"  # MUST match others
  node_id: "22222222-3333-4444-5555-666666666666"  # NEW UUID
  node_name: "node-3"
  hostname: "localhost"
  node_listen_addr: "0.0.0.0:9092"
  advertise_addr: "127.0.0.1:9092"  # ADD this!
  heartbeat_interval_ms: 5000
  failure_timeout_secs: 30
  cluster_peers: ["127.0.0.1:9090", "127.0.0.1:9091"]  # Connect to both nodes
  node_persistence_path: "./orion-nodes-node3"
  min_health_score: 70.0
  auto_discovery: true
  discovery_type: "static"  # MUST match others
  capabilities:
    cpu_cores: 2
    memory_mb: 4096
    max_concurrent_tasks: 30
    supported_task_types: ["cpu_intensive", "low_latency", "general"]

routing:
  enabled: true
  default_strategy: "least_loaded"
  strategies:
    round_robin:
      enabled: true
    least_loaded:
      enabled: true
      weight_cpu: 0.4
      weight_memory: 0.3
      weight_latency: 0.3
    latency_aware:
      enabled: true
      latency_threshold_ms: 100
    failover:
      enabled: true
      max_retries: 3
      blacklist_duration_secs: 300
  selection_timeout_ms: 5000
  health_check_interval_secs: 10